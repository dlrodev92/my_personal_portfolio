---
// Header component with metadata
const { post } = Astro.props;

function formatDate(dateString) {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}
---

<section class="py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto">
    
    <!-- Series Info (if exists) -->
    {post.series && (
      <div class="mb-8">
        <div class="inline-flex items-center px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-sm font-medium">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
            <path d="M16 3h5v5"/>
            <path d="M8 3H3v5"/>
            <path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"/>
            <path d="m15 9 6-6"/>
          </svg>
          {post.series.name} â€¢ Part {post.series.part} of {post.series.total}
        </div>
      </div>
    )}

    <!-- Category & Tags -->
    <div class="flex flex-wrap items-center gap-3 mb-6">
      <span class="inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm font-medium">
        {post.category}
      </span>
      
     {Array.isArray(post.tags) && post.tags.map(tag => (
  <a
    href={`/blog/tag/${tag.slug}`}
    class="inline-block text-xs font-medium px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"
  >
    {tag.name}
  </a>
))}


    </div>

    <!-- Title & Subtitle -->
    <h1 class="font-display text-3xl sm:text-4xl lg:text-5xl font-bold text-black mb-4 leading-tight">
      {post.title}
    </h1>
    
    {post.subtitle && (
      <h2 class="font-body text-xl sm:text-2xl text-gray-600 mb-8 leading-relaxed">
        {post.subtitle}
      </h2>
    )}

    <!-- Metadata -->
    <div class="flex flex-wrap items-center gap-6 text-sm text-gray-600 mb-8">
      <div class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        <time>{formatDate(post.publishedAt)}</time>
      </div>
      
      <div class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12,6 12,12 16,14"/>
        </svg>
        <span>{post.readTime} min read</span>
      </div>
      
      <div class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
        <span>{post.views.toLocaleString()} views</span>
      </div>

      {post.updatedAt && (
        <div class="flex items-center text-xs">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M8 16H3v5"/>
          </svg>
          <span>Updated {formatDate(post.updatedAt)}</span>
        </div>
      )}
    </div>

    <!-- Excerpt -->
    <p class="font-body text-lg text-gray-700 leading-relaxed">
      {post.excerpt}
    </p>

  </div>
</section>
