---
// Engagement section with likes, shares, and newsletter
const { post } = Astro.props;
---

<section class="px-4 sm:px-6 lg:px-8 mb-16">
  <div class="max-w-4xl mx-auto">
    
    <!-- Engagement Actions -->
    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-8 border border-gray-200">
      
      <!-- Reactions -->
      <div class="mb-8">
        <h4 class="font-display text-lg font-bold text-black mb-4">Enjoyed this post?</h4>
        
        <div class="flex items-center space-x-4">
          <!-- Like Button -->
          <button class="flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:border-red-300 hover:bg-red-50 transition-all duration-300 group">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 group-hover:text-red-500">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 group-hover:text-red-500">{post.reactions.likes}</span>
          </button>

          <!-- Love Button -->
          <button class="flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:border-yellow-300 hover:bg-yellow-50 transition-all duration-300 group">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 group-hover:text-yellow-500">
              <circle cx="12" cy="12" r="10"/>
              <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
              <line x1="9" y1="9" x2="9.01" y2="9"/>
              <line x1="15" y1="9" x2="15.01" y2="9"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 group-hover:text-yellow-500">{post.reactions.loves}</span>
          </button>

          <!-- Bookmark Button -->
          <button class="flex items-center space-x-2 px-4 py-2 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-300 group">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 group-hover:text-blue-500">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 group-hover:text-blue-500">{post.reactions.bookmarks}</span>
          </button>
        </div>
      </div>

      <!-- Share Section -->
      <div class="mb-8 pb-8 border-b border-gray-200">
        <h4 class="font-display text-lg font-bold text-black mb-4">Share this post</h4>
        
        <div class="flex items-center space-x-3">
          <!-- Twitter Share -->
          <a 
            href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.title)}&url=${encodeURIComponent(`https://yoursite.com/blog/${post.slug}`)}`}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center space-x-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors duration-300"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/>
            </svg>
            <span class="text-sm font-medium">Twitter</span>
          </a>

          <!-- LinkedIn Share -->
          <a 
            href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(`https://yoursite.com/blog/${post.slug}`)}`}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
              <rect x="2" y="9" width="4" height="12"/>
              <circle cx="4" cy="4" r="2"/>
            </svg>
            <span class="text-sm font-medium">LinkedIn</span>
          </a>

          <!-- Copy Link -->
          <button 
            onclick="copyToClipboard()"
            class="flex items-center space-x-2 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-300"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
            <span class="text-sm font-medium text-gray-700">Copy Link</span>
          </button>
        </div>
      </div>

      <!-- Newsletter CTA -->
      <div class="text-center">
        <h4 class="font-display text-lg font-bold text-black mb-2">Want more posts like this?</h4>
        <p class="text-gray-600 mb-4">Join my newsletter for weekly insights on development, productivity, and tech.</p>
        
        <div class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
          <input 
            type="email" 
            placeholder="Enter your email"
            class="flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"
          />
          <button class="px-6 py-2 bg-yellow-400 text-black font-medium rounded-lg hover:bg-yellow-500 transition-colors duration-300">
            Subscribe
          </button>
        </div>
        
        <p class="text-xs text-gray-500 mt-2">No spam, unsubscribe anytime.</p>
      </div>

    </div>
  </div>
</section>

<script>
  function copyToClipboard() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
      // Simple feedback - could be enhanced with a toast notification
      const button = event.target.closest('button');
      const originalText = button.querySelector('span').textContent;
      button.querySelector('span').textContent = 'Copied!';
      setTimeout(() => {
        button.querySelector('span').textContent = originalText;
      }, 2000);
    });
  }
</script>
